{"version":3,"sources":["components/toggle/index.jsx","components/search_bar/index.jsx","components/likes/index.jsx","components/read/index.jsx","components/book/index.jsx","components/App.jsx","index.jsx"],"names":["Toggle","toggleVal","setToggleVal","key","class","type","onChange","SearchBar","books","categories","favorites","read","setBooksDisplay","React","useState","toggleFav","setToggleFav","toggleRead","setToggleRead","useEffect","booksSearch","reduce","acc","book","includes","isbn","push","updateDisplayByFavorites","updateDisplayByRead","className","event","searchBarValue","target","value","toLowerCase","regeX","RegExp","title","search","name","cat","booksCat","forEach","map","categorie","Like","id","setFavorites","onClick","splice","indexOf","Read","setRead","DisplayBook","thumbnailUrl","src","alt","App","setBooks","setCategories","booksDisplay","fetch","then","response","json","data","cats","sort","unshift","getCategories","color","height","width","index","toString","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.df7edab8.chunk.js","sourcesContent":["import React from 'react';\n\nconst Toggle = ({toggleVal, setToggleVal, key}) => {\n  const handleChange = () => {\n    setToggleVal(!toggleVal);\n  }\n  \n  return (\n    <label class=\"switch\">\n      <input type=\"checkbox\" onChange={handleChange}/>\n      <span class=\"slider\"></span>\n    </label>\n  )\n}\n\nexport default Toggle;","import React from 'react';\nimport Toggle from '../toggle/';\nconst SearchBar = ({books,categories,favorites,read,setBooksDisplay}) => {\n  const [toggleFav, setToggleFav] = React.useState(false);\n  const [toggleRead, setToggleRead] = React.useState(false);\n\n  const updateDisplayBySearch = (event) => {\n    const searchBarValue = event.target.value.toLowerCase();\n    if (searchBarValue === \"\") {\n      setBooksDisplay(books);\n    } else { \n      const regeX = RegExp(`${searchBarValue}.`)\n      const booksSearch = books.reduce(\n        (acc, book) => { \n        if(-1 !== (book.title.toLowerCase().search(regeX))) {\n          acc.push(book);\n        };\n        return acc;\n      }, []);\n      setBooksDisplay(booksSearch);\n    }\n  };\n\n  const updateDisplayByCategories = (event) => {\n    const cat = event.target.value;\n    if (cat === \"All Categories\") {\n      setBooksDisplay(books);\n    } else {\n      const booksCat = [];\n      books.forEach((book) => {       \n        if(book.categories.includes(cat)) {\n          booksCat.push(book);\n        }\n      });\n      setBooksDisplay(booksCat);\n    }\n  };\n\n  const updateDisplayByFavorites = () => {\n    if (!toggleFav) {\n      setBooksDisplay(books);\n    } else { \n      const booksSearch = books.reduce(\n        (acc, book) => { \n        if(favorites.includes(book.isbn)) {\n          acc.push(book);\n        };\n        return acc;\n      }, []);\n      setBooksDisplay(booksSearch);\n    }\n  }\n\n  const updateDisplayByRead = () => {\n    if (!toggleRead) {\n      setBooksDisplay(books);\n    } else { \n      const booksSearch = books.reduce(\n        (acc, book) => { \n        if(read.includes(book.isbn)) {\n          acc.push(book);\n        };\n        return acc;\n      }, []);\n      setBooksDisplay(booksSearch);\n    }\n  }\n\n  React.useEffect(() => {\n    updateDisplayByFavorites();\n  }, [toggleFav]);\n\n  React.useEffect(() => {\n    updateDisplayByRead();\n  }, [toggleRead]);\n\n  return (\n      <nav className=\"searchBar\">\n        <p>Recherche par titre</p> \n        <input type=\"text\" onChange={updateDisplayBySearch}/>\n        <p>Selection par catégorie</p>\n        <select name=\"categories\" onChange={updateDisplayByCategories}>\n          {categories.map((categorie) => (\n            <option value={categorie}>{categorie}</option>\n          ))}\n        </select>\n        <p>Sélection par lu</p>\n        <Toggle\n          toggleVal={toggleRead}\n          setToggleVal={setToggleRead}\n          key=\"read\"\n        />\n        <p>Sélection par favoris</p>\n        <Toggle\n          toggleVal={toggleFav}\n          setToggleVal={setToggleFav}\n          key=\"fav\"\n        />\n      </nav>\n  )\n};\n\nexport default SearchBar;\n","const Like = ({favorites, id, setFavorites}) => {\n  const handleFav = (event) => {\n    if (favorites.includes(id)) {\n      favorites.splice(favorites.indexOf(id), 1);\n      event.target.className = \"likeBtn\";\n      setFavorites(favorites);\n    } else {\n      event.target.className = \"likeBtn red\";\n      setFavorites([...favorites, id]);\n    }\n  };\n\n  return (\n      <div className={\"likeBtn\"} onClick={handleFav}></div>\n  );\n};\n\nexport default Like;","const Read = ({read, id, setRead}) => {\n  const handleFav = (event) => {\n    if (read.includes(id)) {\n      read.splice(read.indexOf(id), 1);\n      event.target.className = \"readBtn\";\n      setRead(read);\n    } else {\n      event.target.className = \"readBtn green\";\n      setRead([...read, id]);\n    }\n  };\n\n  return (\n      <div className={\"readBtn\"} onClick={handleFav}></div>\n  );\n};\n\nexport default Read;","import Like from '../likes/';\nimport Read from '../read/';\n\nconst DisplayBook = ({book, favorites, setFavorites, read, setRead}) => {\n  const {title, thumbnailUrl, isbn} = book;\n\n  return (\n    <li className=\"book__card\">\n      <div className=\"images\">\n        <img src={thumbnailUrl} alt={title.toLowerCase()}/>\n        <Like \n          favorites={favorites}\n          id={isbn}\n          setFavorites={setFavorites}\n        />\n        <Read \n          read={read}\n          id={isbn}\n          setRead={setRead}\n        />\n      </div>\n      <h2>{title}</h2>\n    </li>\n  );\n};\n\n\n\nexport default DisplayBook;","import React from 'react';\nimport ReactLoading from 'react-loading';\nimport SearchBar from './search_bar/';\nimport DisplayBook from './book/';\n\nconst App = () => {\n  const [books, setBooks] = React.useState(null);\n  const [categories, setCategories] = React.useState(null);\n  const [booksDisplay, setBooksDisplay] = React.useState(null);\n  const [read, setRead] = React.useState([]);\n  const [favorites, setFavorites] = React.useState([]);\n\n  const getBooks = () => {\n    fetch('https://gist.githubusercontent.com/MathisDYKDan/76bc73ec77481ccb82677cc7c0d8b524/raw/a23c99027b9bfc1bfdb22e22ddcb4301a5f870ee/books.json')\n      .then(response => response.json())\n      .then(data => {\n        setBooks(data.books[0]);\n      });\n  };\n\n  const getCategories = () => {\n    const cats = books.reduce((acc, book) => {       \n        book.categories.forEach((categorie) => {\n          if (!acc.includes(categorie)) {\n            acc.push(categorie);\n          }\n        });\n      return acc;\n    }, []);\n    cats.sort();\n    cats.unshift(\"All Categories\");\n    setCategories(cats);\n  }\n\n  React.useEffect(() => {\n    getBooks();\n  }, []);\n\n  React.useEffect(() => {\n    if (books) {\n      getCategories();\n      if (!booksDisplay) {\n        setBooksDisplay(books);\n      }\n    };\n  },[books]);\n\n  return (\n    <>\n      <h1>Bienvenue sur <span>BiblioTakeCare</span></h1>\n      {\n        categories &&\n        <SearchBar\n          books={books}\n          categories={categories}\n          read={read}\n          favorites={favorites}\n          setBooksDisplay={setBooksDisplay}\n        /> ||\n        <div className=\"load\">\n          <ReactLoading type={'spokes'} color={'orange'} height={'60px'} width={'60px'} />\n          <p>Chargement...</p>\n        </div>\n      }\n      {\n        booksDisplay &&\n        <ul>\n          { booksDisplay.map((book, index) => (\n            <DisplayBook \n              book={book}\n              favorites={favorites}\n              setFavorites={setFavorites}\n              read={read}\n              setRead={setRead}\n              key={index.toString()}\n            />\n          ))}\n        </ul>\n      }\n    </>\n  )\n};\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './components/App';\n\n\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}